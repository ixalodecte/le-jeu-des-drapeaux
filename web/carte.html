<!DOCTYPE html>
<html lang="fr">
    <head>
        <title>Leaflet.js avec couche Stamen Watercolor</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
        
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
        
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        
        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        
        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script> 
        
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

        <style>
            /* Make the image fully responsive */
            .carousel-inner img {
                width: 100%;
                height: 100%;
            }
            
            p {
                font-size: x-large;
                padding-left: 10px;
            }
        </style>
        
    </head>


    <body>

        <!-- A retirer plus tard (en tête commune à toutes les page)-->
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
            <!-- Brand -->
            <a class="navbar-brand" href="#">Logo</a>
            
            <!-- Links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#">Link 1</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link 2</a>
                </li>
                
                <!-- Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                        Dropdown link
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#">Link 1</a>
                        <a class="dropdown-item" href="#">Link 2</a>
                        <a class="dropdown-item" href="#">Link 3</a>
                    </div>
                </li>
            </ul>
        </nav> 
        
        <!-- La barre de progression (avancement du questionnaire)-->
        <div class="progress">
            <div class="progress-bar" style="width:20%"></div>
        </div>
        
        <!-- "Tableau de bord" du questionnaire -->
        <div class="row bg-light text-dark">

            <!-- Nom du questionnaire -->
            <div class="col-3" id="nomQuestionnaire"><p>Questionnaire : Monde Entier</p></div>
            
            <!-- Compteur de points -->
            <div class="col-3"><p>Nombre de points : </p> <p> <span  id="compteurPoint">0</span>  <span  id="incrementPoint" style="color: forestgreen;"></span> </p></div>
            
            <!-- Boutons pour passer à la question suivante + infos sur le pays -->
            <div id = "boutonInfoSuivant" class="col-4">
                <p id = "message">_</p>
                <button id = "boutonInfo" style="bottom: 3px;" type ="button" class="btn btn-primary" onclick="switchVisibility()" disabled>info</button>
                <button id = "boutonSuivant" style="float: right;margin-right: 15px;" type ="button" class="btn btn-primary" disabled>suivant</button>
            </div>
            
            <!-- Drapeau du pays à trouver -->
            <div class="col-2">
                <img id="drapeau" src="" alt="Trouver ce drapeau" width="140" style="border: 2px solid black;">
            </div>
        </div>
        
        <div style="position: relative;">
            
            <!-- La Carte -->
            <div id="maDiv" style="width: 100%; height: 500px; z-index: 0;"></div>
            
            <!-- Informations sur le pays (A modifier)-->
            <div id = "infoPays" style="top:40px;right:80px;position: absolute;z-index:1;visibility:hidden"> <!-- inspiré de w3school -->            
                <div class="card p-3 mb-2 bg-light" style="width:1000px">
                    <div style="width:100%">
                        <div id="demo" class="carousel slide" data-ride="carousel" style="float: left;width: 400px;">

                            <!-- Les lien carrousel -->
                            <div class="carousel-inner" >
                                <div class="carousel-item active">
                                    <img src="https://media.camptocamp.org/c2corg-active/1237947425_185980712.jpg" alt="New York" width="1100" height="300">
                                </div>
                                <div class="carousel-item">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/Tour_eiffel_at_sunrise_from_the_trocadero.jpg/800px-Tour_eiffel_at_sunrise_from_the_trocadero.jpg" alt="tour eiffel" width="100px" height="100px">
                                </div>
                                <div class="carousel-item">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Crab_Nebula.jpg/800px-Crab_Nebula.jpg" alt="Chicago" width="1100" height="300">
                                </div>
                            </div>
                            
                            <!-- Control droite et gauche -->
                            <a class="carousel-control-prev" href="#demo" data-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                            </a>
                            <a class="carousel-control-next" href="#demo" data-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </a>
                        </div>
                        
                        <!-- Texte provenant de wikipedia -->
                        <div class="card-body" style="float: right; width: 500px;">
                            <h4 id="infoTitre">John Doe</h4>
                            <p id="infoDescription" style="font-size: medium;">Some example text some example text. John Doe is an architect and engineer</p>
                            <a href="#" class="btn btn-primary">See Profile</a>
                        </div>
                    </div>
                    
                </div>
                
            </div>
            
            <!-- Script pour la carte -->
            <script>
                // bornes pour empecher la carte StamenWatercolor de "dériver" trop loin...
                var northWest = L.latLng(90, -180);
                var southEast = L.latLng(-90, 180);
                var bornes = L.latLngBounds(northWest, southEast);
                // Initialisation de la couche StamenWatercolor
                var coucheStamenWatercolor = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}', {
                    attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    subdomains: 'abcd',
                    ext: 'jpg'
                });
                // Initialisation de la carte et association avec la div
                var map = new L.Map('maDiv', {
                    center: [48.858376, 2.294442],
                    minZoom: 2,
                    maxZoom: 18,
                    zoom: 5,
                    maxBounds: bornes
                });
                //var map = L.map('maDiv').setView([48.858376, 2.294442],5);
                // Affichage de la carte
                map.addLayer(coucheStamenWatercolor);
                // Juste pour changer la forme du curseur par défaut de la souris
                document.getElementById('maDiv').style.cursor = 'crosshair'
                //map.fitBounds(bornes);
                // Initilisation d'un popup
                var popup = L.popup();
                // Fonction de conversion au format GeoJSON
                function coordGeoJSON(latlng,precision) { 
                    return '[' +
                    L.Util.formatNum(latlng.lng, precision) + ',' +
                    L.Util.formatNum(latlng.lat, precision) + ']';
                }
                function switchVisibility(){
                    if ($('#infoPays').css('visibility') == "visible"){
                        $('#infoPays').css('visibility', 'hidden');
                    }
                    else{
                        $('#infoPays').css('visibility', 'visible');
                    }
                }
            </script>

        <script src="script/carte.js"></script>
    </body>
</html>
    